{"version": "1.2.5", "commands": {"CREATE_AUTH_REQUEST": {"method": "post", "path_conf": {"path": "/accounts/auth_requests/", "parameters": []}, "meta": {"title": "Create Auth Request", "description": null, "domain": {"id": "account_authentication", "name": "Account & Auth Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": null, "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/account/views.py", "start_line": 24, "end_line": 43, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/account/serializers.py/#lines-27", "schema": {"type": "object", "required": ["authenticate_ui_uri", "request_uuid"], "properties": {"authenticate_ui_uri": {"type": "string", "format": "uri"}, "request_uuid": {"type": "string"}}}}}, "examples": {"201 (AUTH_REQUEST_CREATED)": {"method": "post", "description": "AUTH_REQUEST_CREATED", "request": {"path": "/accounts/auth_requests/", "parameters": {}}, "response": {"status": 201, "content_type": "application/json", "content": {"authenticate_ui_uri": "/accounts/auth_requests/cf1a87b8-455d-11e9-b05d-0028f8484bd5/authenticate/ui/", "request_uuid": "cf1a87b8-455d-11e9-b05d-0028f8484bd5", "@type": "auth_request", "@event": "AUTH_REQUEST_CREATED"}}}}, "@type": "command"}, "RENDER_AUTH_REQUEST_AUTHENTICATE_UI": {"method": "get", "path_conf": {"path": "/accounts/auth_requests/{request_uuid}/authenticate/ui/", "parameters": [{"name": "request_uuid", "type": "string", "description": ""}]}, "meta": {"title": "Render Auth Request Authentication UI", "description": null, "domain": {"id": "account_authentication", "name": "Account & Auth Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": null, "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/account/views.py", "start_line": 48, "end_line": 63, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/home/maciej/projects/lily/lily/base/serializers.py/#lines-164", "schema": {}}}, "examples": {"200": {"method": "get", "description": null, "request": {"path": "/accounts/auth_requests/some-uuid/authenticate/ui/", "parameters": {"request_uuid": "some-uuid"}}, "response": {"status": 200, "content_type": "text/html; charset=utf-8", "content": "<!DOCTYPE html>\n<html>\n    <head>\n        <title>Lakey Authentication</title>\n        <meta\n            name=\"google-signin-client_id\"\n            content=\"961918528927-12heq0l9f1tep1igb29tatkf2pr2p5f7.apps.googleusercontent.com\">\n\n        <link\n            href=\"https://fonts.googleapis.com/css?family=IBM+Plex+Sans\"\n            rel=\"stylesheet\">\n        <style>\n            body {\n                background: #e4e4e4;\n            }\n\n            #main {\n                height: 200px;\n                width: 100%;\n                font-family: 'IBM Plex Sans', sans-serif;\n            }\n\n            h2 {\n                font-weight: normal;\n            }\n\n            #authenticate {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n            }\n        </style>\n        <script\n            type=\"text/javascript\">\n\n            function renderButton() {\n                gapi.signin2.render('google-auth-button', {\n                    'scope': 'profile email',\n                    'width': 240,\n                    'height': 50,\n                    'longtitle': true,\n                    'theme': 'dark',\n                    'onsuccess': onSuccess,\n                    'onfailure': onFailure\n              });\n            }\n\n            function onSuccess(googleUser) {\n                let authRequestUUID = 'some-uuid';\n                let profile = googleUser.getBasicProfile();\n                let authorizationCode = googleUser.getAuthResponse().id_token;\n\n                // FIXME: add ajax call!\n                // FIXME: add progress while waiting for ajax\n                // FIXME: add switch to done screen\n                // FIXME: add switch something went wrong screen\n                // FIXME: add nice font\n                // https://developers.google.com/identity/sign-in/web/build-button\n                console.log('id_token: ' + authorizationCode);\n                console.log('Email: ' + profile.getEmail());\n\n                // document.body.innerHTML = '<div>DONE!</done>';\n            }\n\n            function onFailure(error) {\n                console.log(error);\n            }\n\n        </script>\n        <script\n            src=\"https://apis.google.com/js/platform.js?onload=renderButton\"\n            async\n            defer>\n        </script>\n    </head>\n\n    <body>\n\n        <div\n            id=\"main\">\n            <div\n                id=\"authenticate\">\n\n                <h2>Sign In To Lakey</h2>\n                <div\n                    id=\"google-auth-button\"></div>\n            </div>\n\n            <div\n                id=\"done\">\n\n                DONE\n            </div>\n\n        </div>\n    </body>\n\n</html>\n"}}}, "@type": "command"}, "ATTACH_ACCOUNT_TO_AUTH_REQUEST": {"method": "post", "path_conf": {"path": "/accounts/auth_requests/attach_account/", "parameters": []}, "meta": {"title": "Attach Account to Auth Request", "description": null, "domain": {"id": "account_authentication", "name": "Account & Auth Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": null, "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/account/views.py", "start_line": 76, "end_line": 95, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/home/maciej/projects/lily/lily/base/serializers.py/#lines-164", "schema": {}}, "input_body": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/account/views.py/#lines-68", "schema": {"type": "object", "required": ["request_uuid", "code", "email"], "properties": {"request_uuid": {"type": "string"}, "code": {"type": "string"}, "email": {"type": "string", "format": "email"}}}}}, "examples": {"200 (ACCOUNT_TO_AUTH_REQUEST_ATTACHED)": {"method": "post", "description": "ACCOUNT_TO_AUTH_REQUEST_ATTACHED", "request": {"path": "/accounts/auth_requests/attach_account/", "content": {"request_uuid": "cf1a87b9-455d-11e9-b05d-0028f8484bd5", "code": "some-authorization-code", "email": "jacky@somewhere.org"}, "headers": {"CONTENT-TYPE": "application/json"}, "parameters": {}}, "response": {"status": 200, "content_type": "application/json", "content": {"@type": "empty", "@event": "ACCOUNT_TO_AUTH_REQUEST_ATTACHED"}}}, "400 (BODY_DID_NOT_VALIDATE)": {"method": "post", "description": "BODY_DID_NOT_VALIDATE", "request": {"path": "/accounts/auth_requests/attach_account/", "content": {"request_uuid": "some-uuid", "email": "jacky@somewhere.org"}, "headers": {"CONTENT-TYPE": "application/json"}, "parameters": {}}, "response": {"status": 400, "content_type": "application/json", "content": {"errors": {"request_uuid": ["\"some-uuid\" is not a valid UUID."], "code": ["This field is required."]}, "user_id": "anonymous", "@type": "error", "@event": "BODY_DID_NOT_VALIDATE"}}}, "404 (COULD_NOT_FIND_AUTHREQUEST)": {"method": "post", "description": "COULD_NOT_FIND_AUTHREQUEST", "request": {"path": "/accounts/auth_requests/attach_account/", "content": {"request_uuid": "cf1a87ba-455d-11e9-b05d-0028f8484bd5", "code": "some-code", "email": "jacky@somewhere.org"}, "headers": {"CONTENT-TYPE": "application/json"}, "parameters": {}}, "response": {"status": 404, "content_type": "application/json", "content": {"user_id": "anonymous", "@type": "error", "@event": "COULD_NOT_FIND_AUTHREQUEST"}}}}, "@type": "command"}, "CREATE_AUTH_TOKEN": {"method": "post", "path_conf": {"path": "/accounts/auth_tokens/", "parameters": []}, "meta": {"title": "Create Auth Token", "description": null, "domain": {"id": "account_authentication", "name": "Account & Auth Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": null, "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/account/views.py", "start_line": 104, "end_line": 121, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/account/serializers.py/#lines-20", "schema": {"type": "object", "required": ["token"], "properties": {"token": {"type": "string"}}}}, "input_body": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/account/views.py/#lines-68", "schema": {"type": "object", "required": ["request_uuid"], "properties": {"request_uuid": {"type": "string"}}}}}, "examples": {"201 (AUTH_TOKEN_CREATED)": {"method": "post", "description": "AUTH_TOKEN_CREATED", "request": {"path": "/accounts/auth_tokens/", "content": {"request_uuid": "cf1a87bb-455d-11e9-b05d-0028f8484bd5"}, "headers": {"CONTENT-TYPE": "application/json"}, "parameters": {}}, "response": {"status": 201, "content_type": "application/json", "content": {"token": "fd78cd7d87f", "@type": "auth_token", "@event": "AUTH_TOKEN_CREATED"}}}}, "@type": "command"}, "CREATE_CATALOGUEITEM": {"method": "post", "path_conf": {"path": "/catalogue/items/", "parameters": []}, "meta": {"title": "Create Catalogue Item", "description": null, "domain": {"id": "catalogue", "name": "Catalogue Items Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": ["ADMIN"], "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/catalogue/views.py", "start_line": 23, "end_line": 40, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/catalogue/serializers.py/#lines-32", "schema": {"type": "object", "required": ["items"], "properties": {"items": {"type": "array", "items": {"type": "object", "required": ["name", "spec", "executor_type", "maintained_by"], "properties": {"name": {"type": "string", "maxLength": 256}, "spec": {"type": "object"}, "sample": {"type": "object"}, "executor_type": {"type": "string", "enum": ["ATHENA", "DATABRICKS"]}, "maintained_by": {"type": "object", "required": ["email"], "properties": {"id": {"type": "integer"}, "email": {"type": "string", "format": "email"}, "type": {"type": "string", "enum": ["ADMIN", "RESEARCHER"]}}}}}}}}}, "input_body": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/catalogue/parsers.py/#lines-7", "schema": {"type": "object", "required": ["name", "spec", "executor_type"], "properties": {"name": {"type": "string", "maxLength": 256}, "spec": {"type": "object"}, "sample": {"type": "object"}, "maintained_by_id": {"type": "any"}, "executor_type": {"type": "string", "enum": ["ATHENA", "DATABRICKS"]}}}}}, "examples": {}, "@type": "command"}, "BULK_READ_CATALOGUEITEMS": {"method": "get", "path_conf": {"path": "/catalogue/items/", "parameters": []}, "meta": {"title": "Bulk Read Catalogue Items", "description": null, "domain": {"id": "catalogue", "name": "Catalogue Items Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": ["RESEARCHER", "ADMIN"], "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/catalogue/views.py", "start_line": 46, "end_line": 69, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/catalogue/serializers.py/#lines-32", "schema": {"type": "object", "required": ["items"], "properties": {"items": {"type": "array", "items": {"type": "object", "required": ["name", "spec", "executor_type", "maintained_by"], "properties": {"name": {"type": "string", "maxLength": 256}, "spec": {"type": "object"}, "sample": {"type": "object"}, "executor_type": {"type": "string", "enum": ["ATHENA", "DATABRICKS"]}, "maintained_by": {"type": "object", "required": ["email"], "properties": {"id": {"type": "integer"}, "email": {"type": "string", "format": "email"}, "type": {"type": "string", "enum": ["ADMIN", "RESEARCHER"]}}}}}}}}}, "input_query": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/catalogue/views.py/#lines-42", "schema": {"type": "object", "required": ["query"], "properties": {"query": {"type": "string"}}}}}, "examples": {}, "@type": "command"}, "READ_CATALOGUEITEM": {"method": "get", "path_conf": {"path": "/catalogue/items/{item_id}", "parameters": [{"name": "item_id", "type": "integer", "description": ""}]}, "meta": {"title": "Read Catalogue Item", "description": null, "domain": {"id": "catalogue", "name": "Catalogue Items Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": ["RESEARCHER", "ADMIN"], "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/catalogue/views.py", "start_line": 74, "end_line": 87, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/catalogue/serializers.py/#lines-8", "schema": {"type": "object", "required": ["name", "spec", "executor_type", "maintained_by"], "properties": {"name": {"type": "string", "maxLength": 256}, "spec": {"type": "object"}, "sample": {"type": "object"}, "executor_type": {"type": "string", "enum": ["ATHENA", "DATABRICKS"]}, "maintained_by": {"type": "object", "required": ["email"], "properties": {"id": {"type": "integer"}, "email": {"type": "string", "format": "email"}, "type": {"type": "string", "enum": ["ADMIN", "RESEARCHER"]}}}}}}}, "examples": {}, "@type": "command"}, "UPDATE_CATALOGUEITEM": {"method": "put", "path_conf": {"path": "/catalogue/items/{item_id}", "parameters": [{"name": "item_id", "type": "integer", "description": ""}]}, "meta": {"title": "Update Catalogue Item", "description": null, "domain": {"id": "catalogue", "name": "Catalogue Items Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": ["ADMIN"], "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/catalogue/views.py", "start_line": 89, "end_line": 108, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/catalogue/serializers.py/#lines-8", "schema": {"type": "object", "required": ["name", "spec", "executor_type", "maintained_by"], "properties": {"name": {"type": "string", "maxLength": 256}, "spec": {"type": "object"}, "sample": {"type": "object"}, "executor_type": {"type": "string", "enum": ["ATHENA", "DATABRICKS"]}, "maintained_by": {"type": "object", "required": ["email"], "properties": {"id": {"type": "integer"}, "email": {"type": "string", "format": "email"}, "type": {"type": "string", "enum": ["ADMIN", "RESEARCHER"]}}}}}}, "input_body": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/lakey_service/catalogue/parsers.py/#lines-7", "schema": {"type": "object", "required": ["name", "spec", "executor_type"], "properties": {"name": {"type": "string", "maxLength": 256}, "spec": {"type": "object"}, "sample": {"type": "object"}, "maintained_by_id": {"type": "any"}, "executor_type": {"type": "string", "enum": ["ATHENA", "DATABRICKS"]}}}}}, "examples": {}, "@type": "command"}, "DELETE_CATALOGUEITEM": {"method": "delete", "path_conf": {"path": "/catalogue/items/{item_id}", "parameters": [{"name": "item_id", "type": "integer", "description": ""}]}, "meta": {"title": "Delete Catalogue Item", "description": null, "domain": {"id": "catalogue", "name": "Catalogue Items Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": ["ADMIN"], "is_private": false, "is_external": false, "@type": "access"}, "source": {"filepath": "/lakey_service/catalogue/views.py", "start_line": 110, "end_line": 126, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/home/maciej/projects/lily/lily/base/serializers.py/#lines-164", "schema": {}}}, "examples": {}, "@type": "command"}, "READ_ENTRY_POINT": {"method": "get", "path_conf": {"path": "/", "parameters": []}, "meta": {"title": "Read Entry Point", "description": "Serve Service Entry Point data: - current version of the service - list of all available commands together with their configurations - examples collected for a given service.", "domain": {"id": "docs", "name": "Docs Management", "@type": "domain"}, "@type": "meta"}, "access": {"access_list": null, "is_private": true, "is_external": false, "@type": "access"}, "source": {"filepath": "/home/maciej/projects/lily/lily/entrypoint/views.py", "start_line": 70, "end_line": 142, "@type": "source"}, "schemas": {"output": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/home/maciej/projects/lily/lily/entrypoint/views.py/#lines-46", "schema": {"type": "object", "required": ["version", "name", "commands"], "properties": {"version": {"type": "string"}, "name": {"type": "string"}, "commands": {"type": "object"}}}}, "input_query": {"uri": "https://bitbucket.org/goodai/cosphere-auth-service/src/88b9dee6b68af9f89c63b0914fe042db85558800/home/maciej/projects/lily/lily/entrypoint/views.py/#lines-56", "schema": {"type": "object", "required": [], "properties": {"commands": {"type": "array", "items": {"type": "string"}}, "with_schemas": {"type": "boolean"}, "with_examples": {"type": "boolean"}, "is_private": {"type": "boolean"}, "domain_id": {"type": "string"}, "refresh": {"type": "boolean"}}}}}, "examples": {}, "@type": "command"}}}